<div class="max-w-3xl mx-auto py-8">
  <%= render "deploy_assist/shared/header" %>
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Chrome Extension Setup</h1>
    <p class="text-gray-600">Step 2 of 4: Store Assets</p>

    <!-- Progress bar -->
    <div class="mt-4 w-full bg-gray-200 rounded-full h-2">
      <div class="bg-blue-600 h-2 rounded-full" style="width: 50%"></div>
    </div>
  </div>

  <%= form_with url: deploy_assist.wizards_chrome_extension_step_path(config_id: @service_configuration.id, step_number: 2),
                method: :patch,
                local: true do |f| %>

    <div class="bg-white shadow-md rounded-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Visual Assets</h2>
      <p class="text-sm text-gray-600 mb-6">
        Provide URLs or notes about the images you'll upload to the Chrome Web Store.
      </p>

      <div class="space-y-5">
        <%= fields_for :store_assets do |sa| %>

          <!-- Small Icon -->
          <div>
            <%= sa.label :small_icon_url, "Small Icon (128x128)", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= sa.text_field :small_icon_url,
                value: @step_data[:small_icon_url],
                class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                placeholder: "https://example.com/icon-128.png or 'Will upload manually'" %>
            <p class="mt-1 text-xs text-gray-500">Required: PNG format, exactly 128x128 pixels</p>
          </div>

          <!-- Large Promotional Tile -->
          <div>
            <%= sa.label :large_icon_url, "Large Promotional Tile (440x280)", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= sa.text_field :large_icon_url,
                value: @step_data[:large_icon_url],
                class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                placeholder: "https://example.com/promo-large.png" %>
            <p class="mt-1 text-xs text-gray-500">PNG or JPEG, exactly 440x280 pixels - featured on the Chrome Web Store</p>
          </div>

          <!-- Small Promotional Tile -->
          <div>
            <%= sa.label :promotional_tile_url, "Small Promotional Tile (440x280)", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= sa.text_field :promotional_tile_url,
                value: @step_data[:promotional_tile_url],
                class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                placeholder: "https://example.com/promo-small.png" %>
            <p class="mt-1 text-xs text-gray-500">Optional: Used in promotions and featured listings</p>
          </div>

          <!-- Screenshots -->
          <div>
            <%= sa.label :screenshot_urls, "Screenshot URLs (one per line)", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= sa.text_area :screenshot_urls,
                value: @step_data[:screenshot_urls] || "https://example.com/screenshot-1.png\nhttps://example.com/screenshot-2.png\nhttps://example.com/screenshot-3.png",
                rows: 4,
                class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",
                placeholder: "https://example.com/screenshot-1.png\nhttps://example.com/screenshot-2.png" %>
            <p class="mt-1 text-xs text-gray-500">At least 1 required, up to 5 allowed. Size: 1280x800 or 640x400. PNG or JPEG.</p>
          </div>

          <!-- Demo Video -->
          <div>
            <%= sa.label :demo_video_url, "Demo Video URL (Optional)", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= sa.url_field :demo_video_url,
                value: @step_data[:demo_video_url],
                class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                placeholder: "https://youtube.com/watch?v=..." %>
            <p class="mt-1 text-xs text-gray-500">YouTube video demonstrating your extension's features</p>
          </div>

        <% end %>
      </div>
    </div>

    <!-- Asset Requirements Guide -->
    <div class="bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-5 mb-6">
      <h3 class="text-sm font-semibold text-purple-900 mb-3">üìê Asset Size Reference</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
        <div class="bg-white rounded p-3">
          <h4 class="font-medium text-gray-900 mb-2">Required Assets</h4>
          <ul class="text-xs text-gray-600 space-y-1">
            <li>‚úÖ Icon 128x128 (PNG)</li>
            <li>‚úÖ At least 1 screenshot</li>
            <li>‚úÖ Store tile 440x280</li>
          </ul>
        </div>
        <div class="bg-white rounded p-3">
          <h4 class="font-medium text-gray-900 mb-2">Screenshot Sizes</h4>
          <ul class="text-xs text-gray-600 space-y-1">
            <li>‚Ä¢ 1280x800 (recommended)</li>
            <li>‚Ä¢ 640x400 (minimum)</li>
            <li>‚Ä¢ PNG or JPEG</li>
          </ul>
        </div>
        <div class="bg-white rounded p-3">
          <h4 class="font-medium text-gray-900 mb-2">Promotional Tiles</h4>
          <ul class="text-xs text-gray-600 space-y-1">
            <li>‚Ä¢ Large: 440x280</li>
            <li>‚Ä¢ Small: 440x280</li>
            <li>‚Ä¢ PNG or JPEG</li>
          </ul>
        </div>
        <div class="bg-white rounded p-3">
          <h4 class="font-medium text-gray-900 mb-2">Tips</h4>
          <ul class="text-xs text-gray-600 space-y-1">
            <li>‚Ä¢ Use high-quality images</li>
            <li>‚Ä¢ Show actual features</li>
            <li>‚Ä¢ Avoid text overlays</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Design Tools Recommendation -->
    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-blue-800">Design Tools</h3>
          <div class="mt-2 text-sm text-blue-700">
            <p>Use Figma, Canva, or Adobe XD to create professional-looking assets. Free templates are available at:</p>
            <ul class="mt-1 ml-4 list-disc">
              <li>Figma Community - Chrome Extension templates</li>
              <li>Canva - Social media graphics (custom size)</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="flex justify-between items-center">
      <%= link_to "Cancel", deploy_assist.root_path, class: "text-gray-600 hover:text-gray-900 font-medium" %>
      <div class="flex gap-3">
        <%= link_to deploy_assist.wizards_chrome_extension_step_path(config_id: @service_configuration.id, step_number: 1), class: "px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium rounded-lg transition-colors" do %>
          ‚Üê Previous
        <% end %>
        <%= button_tag type: "submit", class: "px-6 py-2 bg-[var(--color-accent-500)] hover:bg-[var(--color-accent-600)] text-white font-medium rounded-lg transition-colors" do %>
          Continue ‚Üí
        <% end %>
      </div>
    </div>

  <% end %>
</div>
